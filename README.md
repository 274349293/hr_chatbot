# HR Chatbot - 汇仁医药客服训练系统（增强版）

## 项目说明
这是一个用于训练医药企业在线客服人员的聊天机器人系统。系统中，AI扮演寻求购药建议的患者，而您扮演汇仁医药的在线客服人员。系统会随机选择一个目标产品，引导对话向该产品推荐。

## 新特性
- **产品导向对话**：每次对话都有一个预设的目标产品
- **智能开场白**：AI基于产品特性生成不同的症状描述
- **丰富产品库**：支持汇仁肾宝片、六味地黄丸、女金胶囊等产品
- **配置化管理**：产品信息通过JSON文件配置

## 系统要求
- Python 3.8+
- PyCharm（推荐）

## 快速开始

### 1. 安装依赖
在PyCharm的终端中运行：
```bash
pip install flask flask-cors openai
```

### 2. 配置说明
- **API配置**：代码中已包含Azure OpenAI配置
- **产品配置**：`product_config.json` 文件包含所有产品信息

### 3. 运行项目
在PyCharm中直接运行 `app.py` 文件即可。

### 4. 访问系统
打开浏览器访问：http://localhost:5000

## 使用说明

1. **开始对话**：
   - 点击"开始新对话"按钮
   - 系统随机选择一个目标产品
   - AI患者会描述相应症状

2. **进行对话**：
   - 根据患者症状推荐合适的产品
   - 尽量引导至目标产品
   - 提供专业的产品说明

3. **结束对话**：
   - 点击"结束对话"按钮
   - 系统自动评分，考虑是否成功推荐目标产品

4. **查看历史**：
   - 左侧显示历史会话
   - 包含目标产品和得分信息

## 文件结构
```
hr_chatbot/
├── app.py              # 主程序文件
├── product_config.json # 产品配置文件
├── data/               # 存储会话记录
├── requirements.txt    # 依赖列表
└── README.md          # 本说明文件
```

## 产品信息
系统包含以下产品：
1. **汇仁肾宝片**：用于腰膝酸软、夜尿频多、精神不振
2. **六味地黄丸**：用于肾阴亏损、头晕耳鸣、盗汗
3. **女金胶囊**：用于月经不调、痛经、小腹胀痛

每个产品都有完整的：
- 成分说明
- 功能主治
- 用法用量
- 价格信息
- 注意事项

## 对话策略
- AI会根据目标产品生成相应症状
- 客服应识别症状并推荐合适产品
- 系统评分会考虑是否成功推荐目标产品
- 提供产品详细信息有助于提高评分

## 数据存储
- 每次对话结束后保存为JSON文件
- 文件包含完整对话记录和目标产品
- 存储在 `data/` 目录下

## 技术特点
- 单文件架构，易于部署
- 流式对话，实时体验
- 智能评分系统
- 配置化产品管理

## 注意事项
- 确保网络能访问Azure OpenAI服务
- 产品配置文件必须是有效的JSON格式
- 建议定期备份data目录下的会话记录

## 扩展开发
1. **添加新产品**：编辑 `product_config.json`
2. **调整评分标准**：修改 `app.py` 中的评分提示词
3. **自定义症状模板**：在产品配置中修改 `initial_symptom`

## 技术支持
如有问题，请查看代码注释或联系开发者。